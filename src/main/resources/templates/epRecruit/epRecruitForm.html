<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">  <!-- 공통 양식으로 만들었던 layout 호출 -->

<div layout:fragment="content">
  <!-- <form action="/epRecruit/epRecruitAction" method="post">-->
  <div class="container">
    <form id="form" >
      <div class="row mb-3">
        <label class="col-sm-2 col-form-label" for="inpEpName">회사명</label>
        <div class="col-sm-10">
          <input class="form-control" id="inpEpName" type="text" name="epName">
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-form-label col-sm-2 pt-0">기술스택</div>

        <div class="col-sm-10">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="java" name="stack" value="java">
            <label class="form-check-label" for="java">java</label>
          </div>

          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="javascript" name="stack" value="javascript">
            <label class="form-check-label" for="javascript">javascript</label>
          </div>


          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="mysql" name="stack" value="mysql">
            <label class="form-check-label" for="mysql">mysql</label>
          </div>

          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="oracle" name="stack" value="oracle">
            <label class="form-check-label" for="oracle">oracle</label>
          </div>

          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="mariaDB" name="stack" value="mariaDB">
            <label class="form-check-label" for="mariaDB">mariaDB</label>
          </div>

          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="spring" name="stack" value="spring">
            <label class="form-check-label" for="spring">spring</label>
          </div>

          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="springBoot" name="stack" value="springBoot">
            <label class="form-check-label" for="springBoot">springBoot</label>
          </div>

          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="myBatis" name="stack" value="myBatis">
            <label class="form-check-label" for="myBatis">myBatis</label>
          </div>

          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="jpa" name="stack" value="jpa">
            <label class="form-check-label" for="jpa">jpa</label>
          </div>

          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="thymeleaf" name="stack" value="thymeleaf">
            <label class="form-check-label" for="thymeleaf">thymeleaf</label>
          </div>

          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="bootstrap" name="stack" value="bootstrap">
            <label class="form-check-label" for="bootstrap">bootstrap</label>
          </div>
        </div>


      </div>

      <div class="row mb-3">
        <div class="col-form-label col-sm-2 pt-0">게시글 기간</div>
        <div class="col-sm-10">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="1month" name="period" value="1개월">
            <label class="form-check-label" for="1month">1개월</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="3month" name="period" value="3개월" checked>
            <label class="form-check-label" for="3month">3개월</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="6month" name="period" value="6개월">
            <label class="form-check-label" for="6month">6개월</label>
          </div>
        </div>

      </div>

      <div class="row mb-3">
        <div class="col-form-label col-sm-2 pt-0">모집상태</div>

        <div class="col-sm-10">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="public" name="recruit" value="공개">
            <label class="form-check-label" for="public">공개</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="private" name="recruit" value="비공개" checked>
            <label class="form-check-label" for="private">비공개</label>
          </div>
        </div>


      </div>

      <div class="row mb-3">
        <div class="col-form-label col-sm-2 pt-0">성별</div>
        <div class="col-sm-10">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="any" name="gender" value="무관" checked>
            <label class="form-check-label" for="any">무관</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="male" name="gender" value="남성">
            <label class="form-check-label" for="male">남성</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="female" name="gender" value="여성">
            <label class="form-check-label" for="female">여성</label>
          </div>
        </div>

      </div>

      <div class="row mb-3">
        <label class="col-form-label col-sm-2 pt-0" for="intPay">계약금</label>
        <div class="col-sm-10">
          <div class="input-group">
            <input class="form-control" id="intPay" type="number" name="payment" step="100000" min="0">
            <input class="form-control" id="stringPay" type="text" disabled style="color: gray">
            <span class="input-group-text">원</span>
          </div>
          <div class="form-check form-switch">
            <input class="form-check-input" id="payCheckBox" type="checkbox" name="payment" value="추후협상"
                   onclick="payChecked()">
            <label class="form-check-label" for="payCheckBox">추후 협상시 체크</label>
          </div>

        </div>


      </div>

      <div class="row mb-3">
        <div class="col-form-label col-sm-2 pt-0">계약기간</div>
        <div class="col-sm-10">
          <div class="input-group">
            <input class=" form-control" id="startDate" type="date" name="workDayStart">
            <span class="input-group-text">~</span>
            <input class=" form-control" id="endDate" type="date" name="workDayEnd">
          </div>
        </div>

      </div>

      <div class="row mb-3">
        <label class="col-sm-2 col-form-label" for="inpAddr">회사주소</label>
        <div class="col-sm-10">
          <input class="form-control" id="inpAddr" type="text" name="addr">
        </div>
      </div>

      <div class="row mb-3">
        <label class="col-sm-2 col-form-label" for="inpTitle">채용제목</label>
        <div class="col-sm-10">
          <input class="form-control" id="inpTitle" type="text" name="title">
        </div>
      </div>

      <div class="row mb-3">
        <label class="col-sm-2 col-form-label" for="detail">상세요강</label>
        <div class="col-sm-10">
          <textarea class="form-control" id="detail" name="detail" rows="5" cols="60"></textarea>
        </div>
      </div>
      <div class="mb-3 text-start">
        <button class="btn btn-primary" type="button">이전페이지</button>
        <button class="btn btn-primary float-end" type="button" onclick="submitBtn()">제출</button>
      </div>
    </form>
  </div>

  <!-- 사용자 스크립트 추가 -->
  <th:block layout:fragment="script">
    <script th:inline="javascript">

        function submitBtn() {
            let data = new FormData($("#form")[0]);

            $.ajax({
                url: "/epRecruit/epRecruitActionAjax",
                method: 'POST',
                contentType: false,
                processData: false,
                data: data,
                success: function (res) {
                    if (res === 1) {
                        console.log("save")
                    }
                },
                error: function () {
                    alert("통신실패")
                }
            });
        }

        document.querySelector("#startDate").value = new Date().toISOString().substring(0, 10);
        document.querySelector("#endDate").value = new Date().toISOString().substring(0, 10);

        let strPay = document.getElementById("stringPay");
        let intPay = document.getElementById("intPay");
        intPay.addEventListener("input", function (e) {
            let intPayVal = parseInt(document.getElementById("intPay").value);
            if (0 <= intPayVal) {
                strPay.value = intPayVal.toLocaleString('ko-KR');
            } else {
                strPay.value = 0;
            }

        });

        function payChecked() {
            const payChecked = document.querySelector("#payCheckBox").checked;

            if (payChecked === true) {
                intPay.value = 0;
                strPay.value = 0;
                intPay.disabled = true;
            } else {
                intPay.disabled = false;
            }
        }

    </script>
  </th:block>

</div>


</html>